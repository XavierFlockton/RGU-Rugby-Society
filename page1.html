<!--
Threat Model
Threat Source: External
Threat Agent: Human
Threat Intention: Intentional
Threat Motivation: embarrising knot not society
Threat Impact: defacement of quiz and questions and images
Threat Mitigation: proper 2f authenication before priviledged access, regular checks of site
-->
<!DOCTYPE html >
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <title>not Knot Society</title>
        <!--bootstrap-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <!--css-->
        <link rel='stylesheet' href='css/main.css'>
        <!--facebook plugin-->
        <div id="fb-root"></div>
        <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v19.0" nonce="N3KaEZd1"></script>
    </head>

    <!--this is the resource i used to get the quiz code https://www.codewithfaraz.com/content/161/build-a-quiz-application-with-html-css-and-javascript-step-by-step-guide 
    this is the resouce i used for the progress bar https://getbootstrap.com/docs/4.0/components/progress/
    this is the resource i used for the album card https://getbootstrap.com/docs/4.0/examples/album/
    -->
    <body>
        <!--top div with title and logo-->
        <header>
    
            <img class="logo" src="images/logo.png" alt="a picture of the logo" >
                <h1 class="title"> 
                    Not Knot Society
                </h1>
        </header>
        
        <!--nav bar-->
        <nav>
            <!--list of links to pages-->
            <ul>
                <li><a href = index.html >Home</a></li>
                <li><a href = contact_us.html >Contact Us</a></li>
                <li><a href = current_members.html>Current Members</a></li>
                <li><a href = event_calendar.html>Event Calendar</a></li>
                <li><a href = img_gallery.html>Image Gallery</a></li>
                <li class="active"><a href = page1.html>Knot Knowledge</a></li>
                <li><a href = page2.html>Knot Encyclopedia</a></li>
            </ul>
        </nav>  

         <Main> 
            <!-- album of cards-->
            <div class="album py-5 bg-light">
                <div class="container">
                    <!--the row quizes -->
                    <div class="row">
                        <!--quiz 1-->
                        <div class="col-md-4">
                            <!--card bootstrap shadow-->
                            <div class="card mb-4 box-shadow">
                                <!--card image-->
                                <img class="card-img-top" src="images/ReefKnot.jpg" alt="reef knot" data-holder-rendered="true" style="height: 225px; width: 100%; display: block;">
                                <div class="card-body">
                                    <!--quiz with divs-->
                                    <div class="container">
                                        <!--title-->
                                        <h2>General Knot Knowledge</h2>
                                        <!--quiz questions-->
                                        <div id="quiz1"></div>
                                        <!--quiz answers that were incorrect-->
                                        <div id="result1" class="result"></div>
                                        <!--button to submit quiz-->
                                        <button id="submit1" class="button">Submit</button>
                                        <!--button to retry quiz-->
                                        <button id="retry1" class="button hide">Retry</button>
                                        <!--button to show anwers that were incorrect-->
                                        <button id="showAnswer1" class="button hide">Show Answer</button>
                                        <!--button that goes to facebook-->
                                        <div id="share1" class="button hide" data-href="https://developers.facebook.com/docs/plugins/" data-layout="" data-size=""><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Share to facebook</a></div>
                                        <!--quiz progress bar-->
                                        <div class="progress">
                                            <div id="progress-bar1" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--quiz 2-->
                        <div class="col-md-4">
                            <!--card shadow-->
                            <div class="card mb-4 box-shadow">
                                <!--quiz image-->
                                <img class="card-img-top" src="images/climber.jpg" alt="image of a climber" data-holder-rendered="true" style="height: 225px; width: 100%; display: block;">
                                <div class="card-body">
                                    <!--title-->
                                    <h2>Climbing Knot Quiz</h2>
                                    <!--quiz questions-->
                                    <div id="quiz2"></div>
                                    <!--questions answered incorrectly-->
                                    <div id="result2" class="result"></div>
                                    <!--button to submit quiz-->
                                    <button id="submit2" class="button">Submit</button>
                                    <!--button to rety quiz-->
                                    <button id="retry2" class="button hide">Retry</button>
                                    <!--button to show incorrect questions-->
                                    <button id="showAnswer2" class="button hide">Show Answer</button>
                                    <!--button to take you to facebook-->
                                    <div id="share2" class="button hide" data-href="https://developers.facebook.com/docs/plugins/" data-layout="" data-size=""><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Share to facebook</a></div>
                                    <!--progress bar-->
                                    <div class="progress">
                                        <div id="progress-bar2" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--quiz 3-->
                        <div class="col-md-4">
                            <!--card shadow-->
                            <div class="card mb-4 box-shadow">
                                <!--quiz image-->
                                <img class="card-img-top" src="images/decorative.jpg" alt="image of a decorative knot" data-holder-rendered="true" style="height: 225px; width: 100%; display: block;">
                                <div class="card-body">
                                    <!--title-->
                                    <h2>Decorative Knot Quiz</h2>
                                    <!--quiz questions-->
                                    <div id="quiz3"></div>
                                    <!--questions answered incorrectly-->
                                    <div id="result3" class="result"></div>
                                    <!--button to submit quiz-->
                                    <button id="submit3" class="button">Submit</button>
                                    <!--button to retry quiz-->
                                    <button id="retry3" class="button hide">Retry</button>
                                    <!--button to questions answered incorrectly-->
                                    <button id="showAnswer3" class="button hide">Show Answer</button>
                                    <!--button to share to facebook-->
                                    <div id="share3" class="button hide" data-href="https://developers.facebook.com/docs/plugins/" data-layout="" data-size=""><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Share to facebook</a></div>
                                    <!--progress bar-->
                                    <div class="progress">
                                        <div id="progress-bar3" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            
    <!--this is the resource i used to get the quiz code https://www.codewithfaraz.com/content/161/build-a-quiz-application-with-html-css-and-javascript-step-by-step-guide -->
            <!--script that creates the quiz answers and progress bar-->
            <script>
                
                // fuction is created and the questions quiz container result container and button ids for each quiz is passed in
                function createQuiz(quiz,quizbox,result,submit,retry,Answer,share,progress) {
                    // the ids are then assigned to a variable
                    const quizContainer = document.getElementById(quizbox);
                    const resultContainer = document.getElementById(result);
                    const submitButton = document.getElementById(submit);
                    const retryButton = document.getElementById(retry);
                    const showAnswerButton = document.getElementById(Answer);
                    const showshare = document.getElementById(share)
                    const progressBar = document.getElementById(progress);    
                    
                    //indexes are set
                    let currentQuestion = 0;
                    let score = 0;
                    let incorrectAnswers = [];
                    
                    // function to randomise the order of questions options to make retry harder
                    function shuffleArray(array) {
                        for (let i = array.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [array[i], array[j]] = [array[j], array[i]];
                        }
                    }
                    
                    // function to display questions on card
                    function displayQuestion() {
                        const questionData = quiz[currentQuestion];
                    
                        const questionElement = document.createElement("div");
                        questionElement.className = "question";
                        questionElement.innerHTML = questionData.question;
                    
                        const optionsElement = document.createElement("div");
                        optionsElement.className = "options";
                    
                        const shuffledOptions = [...questionData.options];
                        shuffleArray(shuffledOptions);
                    
                        for (let i = 0; i < shuffledOptions.length; i++) {
                        const option = document.createElement("label");
                        option.className = "option";
                    
                        const radio = document.createElement("input");
                        radio.type = "radio";
                        radio.name = "quiz";
                        radio.value = shuffledOptions[i];
                    
                        const optionText = document.createTextNode(shuffledOptions[i]);
                    
                        option.appendChild(radio);
                        option.appendChild(optionText);
                        optionsElement.appendChild(option);
                        }
                    
                        quizContainer.innerHTML = "";
                        quizContainer.appendChild(questionElement);
                        quizContainer.appendChild(optionsElement);
                    }
                    
                    // function to check asnwer submited
                    function checkAnswer() {
                        const selectedOption = document.querySelector('input[name="quiz"]:checked');
                        if (selectedOption) {
                        const answer = selectedOption.value;
                        if (answer === quiz[currentQuestion].answer) {
                            score++;
                        } else {
                            // question added to incorrect array
                            incorrectAnswers.push({
                            question: quiz[currentQuestion].question,
                            incorrectAnswer: answer,
                            correctAnswer: quiz[currentQuestion].answer,
                            });
                        }
                        currentQuestion++;
                        selectedOption.checked = false;
                        if (currentQuestion < quiz.length) {
                            displayQuestion();
                        } else {
                            displayResult();
                        }
                        }

                        // progress bar width attribute/ percentage calculated and changed
                        const progressPercentage = ((currentQuestion) / quiz.length) * 100;
                        progressBar.style.width = progressPercentage + "%";
                        progressBar.setAttribute("aria-valuenow", progressPercentage)
                        progressBar.textContent = progressPercentage + "%";
                    }

                    // function to display results
                    function displayResult() {
                        quizContainer.style.display = "none";
                        submitButton.style.display = "none";
                        retryButton.style.display = "inline-block";
                        showshare.style.display = "inline-block";
                        showAnswerButton.style.display = "inline-block";
                        resultContainer.innerHTML = `You scored ${score} out of ${quiz.length}!`;
                    }

                    // function to reset quiz container
                    function retryQuiz() {
                        //indexes reset
                        currentQuestion = 0;
                        score = 0;
                        incorrectAnswers = [];
                        quizContainer.style.display = "block";
                        submitButton.style.display = "inline-block";
                        retryButton.style.display = "none";
                        showAnswerButton.style.display = "none";
                        resultContainer.innerHTML = "";
                        displayQuestion();
                    }
                    
                    // function to show incorrect answers
                    function showAnswer() {
                        quizContainer.style.display = "none";
                        submitButton.style.display = "none";
                        retryButton.style.display = "inline-block";
                        showAnswerButton.style.display = "none";
                    
                        // displays all questions/ answers to incorrectly answered questions
                        let incorrectAnswersHtml = "";
                        for (let i = 0; i < incorrectAnswers.length; i++) {
                        incorrectAnswersHtml += `
                            <p>
                            <strong>Question:</strong> ${incorrectAnswers[i].question}<br>
                            <strong>Your Answer:</strong> ${incorrectAnswers[i].incorrectAnswer}<br>
                            <strong>Correct Answer:</strong> ${incorrectAnswers[i].correctAnswer}
                            </p>
                        `;
                        }
                    
                        resultContainer.innerHTML = `
                        <p>You scored ${score} out of ${quiz.length}!</p>
                        <p>Incorrect Answers:</p>
                        ${incorrectAnswersHtml}
                        `;
                    }
                    
                    // add event listiners for each buttom#n
                    submitButton.addEventListener("click", checkAnswer);
                    retryButton.addEventListener("click", retryQuiz);
                    showAnswerButton.addEventListener("click", showAnswer);

                    // calls display function
                    displayQuestion();
                }

                // stored quiz content
                const GeneralknotQuiz = [
                    {
                        question: "What knot is often used to secure a rope to a fixed object?",
                        options: ["Bowline", "Sheet Bend", "Figure Eight", "Clove Hitch"],
                        answer: "Clove Hitch"
                    },
                    {
                        question: "Which knot creates a loop that tightens when pulled and is commonly used for attaching a fender to a line?",
                        options: ["Clove Hitch", "Bowline", "Figure Eight", "Cleat Hitch"],
                        answer: "Cleat Hitch"
                    },
                    {
                        question: "Which knot is used to join two ropes together?",
                        options: ["Bowline", "Sheet Bend", "Clove Hitch", "Figure Eight"],
                        answer: "Sheet Bend"
                    },
                    {
                        question: "What knot is often used to secure a tent or tarp?",
                        options: ["Clove Hitch", "Taut-line Hitch", "Bowline", "Figure Eight"],
                        answer: "Taut-line Hitch"
                    },
                    {
                        question: "Which knot is commonly used for climbing to tie into a harness?",
                        options: ["Figure Eight", "Bowline", "Clove Hitch", "Sheet Bend"],
                        answer: "Figure Eight"
                    },
                    {
                        question: "What knot is often used to tie down loads on trucks or trailers?",
                        options: ["Truckers Hitch", "Square Knot", "Fisherman's Knot", "Bowline"],
                        answer: "Trucker's Hitch"
                    },
                    {
                        question: "Which knot is used for creating a secure loop at the end of a line?",
                        options: ["Bowline", "Double Fisherman's Knot", "Clove Hitch", "Figure Eight"],
                        answer: "Bowline"
                    },
                    {
                        question: "What is the name of the knot used to tie two ends of a rope together?",
                        options: ["Square Knot", "Sheet Bend", "Clove Hitch", "Figure Eight"],
                        answer: "Square Knot"
                    },
                    {
                        question: "Which knot is often used to secure a rope to a cleat on a dock?",
                        options: ["Cleat Hitch", "Round Turn and Two Half Hitches", "Sheet Bend", "Clove Hitch"],
                        answer: "Cleat Hitch"
                    },
                    {
                        question: "What knot is often used in boating to tie a line to an anchor?",
                        options: ["Anchor Hitch", "Bowline", "Clove Hitch", "Figure Eight"],
                        answer: "Anchor Hitch"
                    }
                ]

                const climbingKnotsQuiz = [
                    {
                        question: "Which knot is commonly used to tie into a climbing harness?",
                        options: ["Figure Eight Follow Through", "Bowline", "Double Fisherman's Knot", "Clove Hitch"],
                        answer: "Figure Eight Follow Through"
                    },
                    {
                        question: "What knot is used to attach the climbing rope to a carabiner?",
                        options: ["Clove Hitch", "Water Knot", "Prusik Knot", "Double Fisherman's Knot"],
                        answer: "Clove Hitch"
                    },
                    {
                        question: "Which knot is often used to create a loop that tightens when weighted and is useful for attaching equipment or creating a friction hitch?",
                        options: ["Munter Hitch", "Figure Eight Follow Through", "Prusik Knot", "Bowline"],
                        answer: "Munter Hitch"
                    },
                    {
                        question: "What knot is commonly used to tie two ropes together?",
                        options: ["Water Knot", "Double Fisherman's Knot", "Bowline", "Clove Hitch"],
                        answer: "Double Fisherman's Knot"
                    },
                    {
                        question: "Which knot is used to secure the climber to a belay anchor?",
                        options: ["Prusik Knot", "Munter Hitch", "Figure Eight Follow Through", "Water Knot"],
                        answer: "Figure Eight Follow Through"
                    },
                    {
                        question: "What knot is commonly used to tie off the end of a climbing rope to prevent it from slipping through a belay device?",
                        options: ["Water Knot", "Double Fisherman's Knot", "Prusik Knot", "Clove Hitch"],
                        answer: "Overhand Knot"
                    },
                    {
                        question: "Which knot is often used to tie a climbing rope to a harness when rappelling?",
                        options: ["Munter Hitch", "Figure Eight Follow Through", "Bowline", "Double Fisherman's Knot"],
                        answer: "Figure Eight Follow Through"
                    },
                    {
                        question: "What knot is used to attach a climber to an anchor using a sling or runner?",
                        options: ["Clove Hitch", "Water Knot", "Prusik Knot", "Girth Hitch"],
                        answer: "Girth Hitch"
                    },
                    {
                        question: "Which knot is commonly used to create a friction hitch for ascending a rope?",
                        options: ["Double Fisherman's Knot", "Prusik Knot", "Figure Eight Follow Through", "Bowline"],
                        answer: "Prusik Knot"
                    },
                    {
                        question: "What knot is used to tie a climber's rope directly into an anchor?",
                        options: ["Bowline", "Figure Eight Follow Through", "Double Fisherman's Knot", "Clove Hitch"],
                        answer: "Bowline"
                    }
                ]
                const decorativeKnotQuiz = [
                    {
                        question: "What knot is often used as a decorative knot and to prevent the end of a rope from unraveling?",
                        options: ["Crown Knot", "Figure Eight Knot", "Clove Hitch", "Bowline"],
                        answer: "Crown Knot"
                    },
                    {
                        question: "Which knot is commonly used in macramé and other decorative projects to create a series of square knots?",
                        options: ["Turk's Head Knot", "Lanyard Knot", "Overhand Knot", "Josephine Knot"],
                        answer: "Square Knot"
                    },
                    {
                        question: "What knot is often used to make decorative keychains and lanyards?",
                        options: ["Diamond Knot", "Bowline", "Sheet Bend", "Clove Hitch"],
                        answer: "Diamond Knot"
                    },
                    {
                        question: "Which decorative knot is shaped like a butterfly and used in crafts and jewelry making?",
                        options: ["Butterfly Knot", "Figure Eight Knot", "Clove Hitch", "Sheet Bend"],
                        answer: "Butterfly Knot"
                    },
                    {
                        question: "What knot is commonly used in Chinese decorative knots and is often seen in knotting artwork?",
                        options: ["Button Knot", "Monkey's Fist Knot", "Turk's Head Knot", "Matthew Walker Knot"],
                        answer: "Turk's Head Knot"
                    },
                    {
                        question: "Which knot is often used as a decorative stopper knot at the end of a rope?",
                        options: ["Matthew Walker Knot", "Lanyard Knot", "Bowline", "Figure Eight Knot"],
                        answer: "Matthew Walker Knot"
                    },
                    {
                        question: "What knot is often used in Celtic knotwork for its interlacing pattern?",
                        options: ["Celtic Knot", "Clove Hitch", "Bowline", "Sheet Bend"],
                        answer: "Celtic Knot"
                    },
                    {
                        question: "Which decorative knot is used to make a decorative knot ball?",
                        options: ["Monkey's Fist Knot", "Diamond Knot", "Lanyard Knot", "Butterfly Knot"],
                        answer: "Monkey's Fist Knot"
                    },
                    {
                        question: "What knot is commonly used in knotted rug making and other textile crafts?",
                        options: ["Square Knot", "Overhand Knot", "Half Hitch", "Bowline"],
                        answer: "Half Hitch"
                    },
                    {
                        question: "Which decorative knot is used to create a decorative cord with intricate patterns?",
                        options: ["Turk's Head Knot", "Crown Knot", "Figure Eight Knot", "Sheet Bend"],
                        answer: "Turk's Head Knot"
                    }
                ]


                // creates quiz by passing id names into the create quiz function
                createQuiz(GeneralknotQuiz,"quiz1", "result1", "submit1","retry1","showAnswer1","share1", "progress-bar1"); 
                createQuiz(climbingKnotsQuiz,"quiz2", "result2", "submit2","retry2","showAnswer2","share2", "progress-bar2"); 
                createQuiz(decorativeKnotQuiz,"quiz3", "result3", "submit3","retry3","showAnswer3","share3", "progress-bar3");

            </script>
        </Main>  
        
        <!--bottom div with copyright info-->
        <footer>
            <p>Copyright © Xavier Flockton 2024</p>
        </footer>
    </body>
</html>

